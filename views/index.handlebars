<header>
    <!-- Fixed navbar -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Plumbi</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="https://www.github.com/calvh/plumbi" target="_blank"><i
                                class="bi bi-github"></i> GitHub</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<main class="flex-shrink-0">
    <div class="container">

        <section class="py-5 text-center container">
            <div class="row py-lg-5">
                <div class="col-lg-6 col-md-8 mx-auto">
                    <h1 class="fw-light">Location-based posts</h1>
                    <p>
                    <ol class="lead text-muted text-start">
                        <li>Enter coordinates or use the auto-detect.</li>
                        <li>Find the nearest city using the button.</li>
                        <li>Write a message and click Submit.</li>
                    </ol>
                    <p class="text-start">
                        <small class="text-start text-muted">Note: For privacy reasons only the nearest city is stored,
                            not coordinates</small>
                    </p>
                    </p>
                    <p>
                        <button id="btn-new-post" class="btn btn-primary" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse-new-post" aria-expanded="false" aria-controls="collapse-new-post">
                            New Post
                        </button>
                    </p>
                </div>
            </div>
        </section>

        <div class="collapse" id="collapse-new-post">
            <div class="card card-body">
                <form>
                    <div class="form-floating">
                        <textarea id="textarea-new-post" class="form-control" name="post" placeholder="Write something"
                            maxlength="300" required></textarea>
                        <label for="textarea-new-post">Post</label>
                    </div>

                    <br>

                    <div class="row align-items-center">
                        <div class="col-auto">
                            <div class="input-group">
                                <button id="btn-get-position" class="btn btn-secondary" type="button"
                                    data-bs-toggle="tooltip" data-bs-placement="top" title="Detect my position">
                                    <i class="bi bi-compass-fill"></i></button>
                                <div class="form-floating">
                                    <input id="input-latitude" class="form-control" type="number" min="-90" max="90"
                                        placeholder="Latitude" aria-label="Latitude" required>
                                    <label for="input-latitude">Latitude</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="form-floating">
                                <input id="input-longitude" class="form-control" type="number" min="-180" max="180"
                                    placeholder="Longitude" aria-label="Longitude" required>
                                <label for="input-longitude">Longitude</label>
                            </div>
                        </div>
                    </div>

                    <br>

                    <div class="input-group flex-nowrap">
                        <button id="btn-update-city" class="btn btn-secondary" type="button" data-bs-toggle="tooltip"
                            data-bs-placement="top" title="Find nearest city">
                            <i class="bi bi-geo-fill"></i></button>
                        <div class="form-floating">
                            <input id="city" type="text" class="form-control" placeholder="Nearest City" readonly>
                            <label for="city">Nearest City</label>
                        </div>
                        <span class="input-group-text"><img id="input-country-flag"></span>
                    </div>

                    <div id="error" class="mt-1" style="display: none">
                        <small class="form-text text-danger">
                        </small>
                    </div>

                    <br>

                    <button id="btn-submit" class="btn btn-primary" type="button">
                        Submit
                    </button>
                    <button class="btn btn-danger" data-bs-toggle="collapse" data-bs-target="#collapse-new-post"
                        type="button" aria-expanded="false" aria-controls="collapse-new-post">
                        Close
                    </button>
                </form>
            </div>
        </div>

        <p class="mt-3 lead">Latest Posts</p>

        <ul id="latest" class="list-group"></ul>

        <div class="my-3 text-center">
            <button id="btn-load-more" type="button" class="btn btn-primary">
                Load More <i class="bi bi-arrow-repeat"></i>
            </button>
        </div>
        <div class="my-3 text-center">
            <button id="btn-scroll-top" type="button" class="btn btn-danger">
                Back To Top <i class="bi bi-arrow-up-circle"></i>
            </button>
        </div>

    </div>
</main>

<footer class="footer mt-auto py-3 bg-light">
    <div class="container">
        <small>
            <span class="text-muted">
                <div>Geodata from <a href="https://www.geonames.org/" title="GeoNames">geonames.org</a></div>
            </span>
            <span class="text-muted">
                <div>Country flags from <a href="https://www.countryflags.io/" title="countryflags">countryflags.org</a>
                </div>
            </span>
        </small>
    </div>
</footer>


<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="/js/script.js"></script>